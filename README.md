# 🔧 小米云服务便签批量导出工具

一键批量备份小米云服务云便签（包含图片，录音等文件），支持导出为 Markdown 格式，并按文件夹分类整理。

## ✨ 动机

犹记得我最后一部使用过的小米手机是，红米 note 4X，当年的千元机之王，陪我走过了大学的青春岁月，记录了许多美好回忆。

不过自从大学毕业后，我就再也没有用过小米手机。直到有一天，邮箱里收到了，小米云服务存储数据即将清空的邮件，WTF！

![](screenshots/mi.jpg)

本以为云服务里的数据是永久保存的，得亏我经常看邮件，不然一个月之后，里面存的便签和短信记录就都被清空了～

但最蛋疼的是，这丫不支持批量导出便笺/笔记！！！ 没办法，只能自己造轮子了～

## 💡 使用方法

## 1. 导出原始数据

首先，在浏览器登录你的小米云服务账号。

然后，复制 cookie 到 `.env` 文件中（参考 `.env.example`）

最后，运行以下命令下载便签数据：

```bash
yarn && yarn dev
```

不出意外，你的便签数据就会备份到 `data/notes.json` 文件里了，相关的图片和音频文件会保存在 `data/assets` 目录下。

![](screenshots/demo.jpg)

PS: 便签中的图片，音频等文件，下载到了 `data/assets` 目录下。

## 2. 转换为 Markdown 格式

完成原始数据导出后，你可以将便签转换为更通用的 Markdown 格式。运行以下命令：

```bash
yarn export
```

这将会在 `data/export` 目录下生成 Markdown 文件，具有以下特点：

- **按文件夹分类**：便签会按照原始的文件夹结构整理到不同的子目录中
- **保留标题**：如果便签有标题，会被保留并用作文件名的一部分
- **文件名格式**：`[ID][创建日期][标题].md`，方便排序和查找
- **图片支持**：所有图片都会被正确导出，并在 Markdown 中保持可访问
- **元数据保留**：每个便签的创建日期、ID、所属文件夹等信息都会保留在文件中

导出后的目录结构示例：

```
data/export/
  ├── assets/                     # 所有图片等资源文件
  │   ├── image1.jpg
  │   └── image2.png
  ├── default/                    # 默认文件夹
  │   ├── [00000123][2024-03-21][我的笔记].md
  │   └── [00000124][2024-03-21][购物清单].md
  └── folder_1/                   # 其他文件夹
      └── [00000125][2024-03-21][重要文档].md
```

每个 Markdown 文件都包含完整的便签内容，包括：

- 标题（如果有）
- 创建日期、ID 等元数据
- 正文内容
- 图片（如果有）

PS: 便签中的图片，音频等文件，会被复制到 `data/export/assets` 目录下，并在 Markdown 中使用相对路径引用，确保可以正常显示。

## License

MIT License © 2022-PRESENT [Del Wang](https://del.wang)
